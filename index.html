<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
    <title>ARTEMIS â€¢ APEX HERITAGE</title> 
    <link rel="manifest" href="./manifest.json"> 
    <meta name="apple-mobile-web-app-capable" content="yes"> 
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"> 
    <meta name="theme-color" content="#00f2ff"> 
    <style> 
        :root { --cyan: #00f2ff; --glass: rgba(0, 15, 25, 0.72); --border: rgba(0, 242, 255, 0.42); --bloom: 0 0 20px rgba(0, 242, 255, 0.55); } 
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; } 
        body, html { margin:0; padding:0; width:100%; height:100vh; overflow:hidden; background: #000; font-family: 'Courier New', monospace; color: var(--cyan); touch-action: manipulation; } 
        #apex-background-container { position:fixed; inset:0; z-index:-10; background:#000; overflow:hidden; } 
        #image-bg, #video-bg { position:absolute; inset:0; width: 100%; height: 100%; object-fit:cover; transition:opacity 0.8s; filter:brightness(0.6) contrast(1.2); } 
        #bg-overlay { position:absolute; inset:0; background:radial-gradient(circle, transparent 20%, rgba(0,0,0,0.65) 100%); z-index:-5; } 
        
        /* Boot Screen */
        #olympus-boot-screen { position:fixed; inset:0; background:#000; z-index:10000; display:flex; flex-direction:column; align-items:center; justify-content:center; transition:opacity 2s ease-in-out; } 
        #boot-video { width:300px; margin-bottom:30px; filter:drop-shadow(0 0 20px rgba(0,242,255,0.4)); } 
        .loader-container { width:200px; height:2px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden; } 
        #loader-progress { width:0; height:100%; background:#fff; box-shadow:0 0 10px #fff; transition:width 3.5s cubic-bezier(0.4,0,0.2,1); } 

        /* Modals & Overlays */
        #language-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(15px); z-index: 12000; display: none; align-items: center; justify-content: center; padding: 20px; } 
        .lang-container { background: rgba(10,15,20,0.95); border: 1px solid var(--cyan); border-radius: 20px; max-width: 450px; width: 100%; padding: 30px; box-shadow: 0 0 50px rgba(0,242,255,0.3); } 
        .lang-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-top: 20px; } 
        .lang-btn { background: rgba(0,242,255,0.08); border: 1px solid rgba(0,242,255,0.3); color: var(--cyan); padding: 14px 8px; border-radius: 10px; cursor: pointer; transition: 0.25s; } 
        .lang-btn.active { background: var(--cyan); color: #000; }
        .confirm-btn { width:100%; margin-top: 20px; padding: 15px; background: var(--cyan); color: #000; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; opacity: 0.5; }
        .confirm-btn:not(:disabled) { opacity: 1; }

        /* UI Elements */
        #system-header { width: 100%; padding: 25px; display: flex; flex-direction: column; align-items: center; gap: 20px; z-index: 100; } 
        .meta-row { display: flex; gap: 40px; font-size: 11px; letter-spacing: 3px; text-transform: uppercase; } 
        .search-bar { width: 100%; max-width: 600px; padding: 14px 30px; border-radius: 50px; border: 1px solid var(--cyan); background: rgba(0,0,0,0.6); color: #fff; text-align: center; backdrop-filter: blur(15px); } 

        /* Windows (Holoframes) */
        #desktop-manager { position: fixed; inset: 0; z-index: 50; pointer-events: none; } 
        .holoframe { position: absolute; min-width: 300px; min-height: 200px; border: 2px solid var(--cyan); border-radius: 12px; background: var(--glass); backdrop-filter: blur(30px); pointer-events: auto; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 0 40px rgba(0,242,255,0.2); } 
        .holo-header { padding: 10px 16px; display: flex; justify-content: space-between; align-items: center; cursor: move; background: rgba(0,0,0,0.4); } 
        .iframe-wrapper { flex: 1; background: #000; } 
        iframe { width: 100%; height: 100%; border: none; }
        .close-btn { color: #ff3366; cursor: pointer; font-weight: bold; margin-left: 15px; }

        /* Bottom Controls & Apps */
        .bottom-sheet { position: fixed; bottom: 0; left: 0; right: 0; height: 75vh; background: rgba(5,10,15,0.98); border-top: 1px solid var(--cyan); z-index: 700; transform: translateY(calc(100% - 60px)); transition: transform 0.6s cubic-bezier(0.16,1,0.3,1); } 
        .bottom-sheet.expanded { transform: translateY(0); } 
        .sheet-handle { padding: 15px; cursor: pointer; display: flex; justify-content: center; background: rgba(0,242,255,0.1); }
        .handle-bar { width: 50px; height: 4px; background: var(--cyan); border-radius: 10px; }
        #app-wrapper { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 40px; overflow-y: auto; }
        .app-icon { width: 90px; text-align: center; cursor: pointer; }
        .icon-box { width: 60px; height: 60px; border: 1px solid var(--border); border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 28px; margin: 0 auto 8px; }

        /* Side & Dock */
        .dock { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); display: flex; gap: 15px; padding: 10px 25px; background: rgba(0,0,0,0.8); border: 1px solid var(--border); border-radius: 50px; z-index: 600; }
        #history-panel { position: fixed; top: 0; left: -320px; width: 300px; height: 100%; background: rgba(5,10,15,0.95); border-right: 1px solid var(--border); z-index: 3000; transition: 0.4s; }
        #history-panel.open { left: 0; }
    </style> 
</head> 
<body> 

    <div id="apex-background-container"> 
        <div id="image-bg"></div> 
        <video id="video-bg" autoplay loop muted playsinline></video> 
        <div id="bg-overlay"></div> 
    </div> 

    <div id="olympus-boot-screen"> 
        <video id="boot-video" autoplay loop muted playsinline> 
            <source src="https://files.catbox.moe/5xh10y.mp4" type="video/mp4"> 
        </video> 
        <div class="loader-container"> <div id="loader-progress"></div> </div> 
    </div> 

    <div id="language-modal"> 
        <div class="lang-container"> 
            <div class="lang-title" style="text-align:center; letter-spacing:3px;">SELECT SYSTEM LANGUAGE</div> 
            <div class="lang-grid" id="lang-grid"></div> 
            <button class="confirm-btn" id="confirm-lang" disabled>CONFIRM INITIALIZATION</button> 
        </div> 
    </div> 

    <header id="system-header"> 
        <div class="meta-row"> 
            <div>ARCHIVE: <span id="cur-date">--/--/--</span></div> 
            <div>CHRONO: <span id="cur-time">00:00:00</span></div> 
        </div> 
        <form id="neural-search-form" onsubmit="executeNeuralSearch(event)" style="width:100%; display:flex; justify-content:center;"> 
            <input type="text" id="search-input" class="search-bar" placeholder="EXECUTE NEURAL COMMAND..."> 
        </form> 
    </header> 

    <div id="desktop-manager"></div> 

    <div id="bottom-controls-sheet" class="bottom-sheet"> 
        <div class="sheet-handle" onclick="toggleSheet()"><div class="handle-bar"></div></div> 
        <div class="sheet-content">
            <main id="app-wrapper"></main> 
        </div> 
    </div> 

    <div class="dock"> 
        <div class="dock-btn" onclick="spawnFrame('https://artemis-hub.vercel.app/', 'NEXUS HUB', '#00f2ff')">[ ACCESS NEXUS ]</div> 
        <div class="dock-btn" onclick="toggleHistory()">[ LEDGER ]</div>
    </div> 

    <div id="history-panel">
        <div style="padding:30px; border-bottom:1px solid var(--border);">HISTORY</div>
        <div id="history-list"></div>
    </div>

    <script> 
        // --- GLOBALS ---
        const systems = { 
            ARTEMIS: { color: "#00f2ff", font: "Courier New", defaultBg: "https://cdn.pixabay.com/video/2023/10/20/185834-876615024_tiny.mp4" }
        };
        let threads = [];
        let historyData = JSON.parse(localStorage.getItem('artemis_history') || "[]");
        let currentMode = 'ARTEMIS';

        // --- BOOT LOGIC ---
        window.addEventListener('load', () => {
            const progress = document.getElementById('loader-progress');
            const bootScreen = document.getElementById('olympus-boot-screen');
            setTimeout(() => progress.style.width = '100%', 100);
            setTimeout(() => {
                bootScreen.style.opacity = '0';
                setTimeout(() => { 
                    bootScreen.style.display = 'none'; 
                    showLanguageSelector(); 
                }, 2000);
            }, 3800);
        });

        function showLanguageSelector() {
            const modal = document.getElementById('language-modal');
            const grid = document.getElementById('lang-grid');
            const languages = [{code:"en", name:"English"}, {code:"ja", name:"æ—¥æœ¬èªž"}, {code:"es", name:"EspaÃ±ol"}];
            
            languages.forEach(lang => {
                const btn = document.createElement('button');
                btn.className = 'lang-btn';
                btn.textContent = lang.name;
                btn.onclick = () => {
                    document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    document.getElementById('confirm-lang').disabled = false;
                };
                grid.appendChild(btn);
            });

            document.getElementById('confirm-lang').onclick = () => {
                modal.style.display = 'none';
                initOS();
            };
            modal.style.display = 'flex';
        }

        function initOS() {
            updateClock();
            setInterval(updateClock, 1000);
            updateOSBackground('ARTEMIS', systems.ARTEMIS.defaultBg);
            renderApps();
            renderHistory();
        }

        function updateClock() {
            const now = new Date();
            document.getElementById('cur-date').innerText = now.toLocaleDateString();
            document.getElementById('cur-time').innerText = now.toLocaleTimeString();
        }

        // --- WINDOW ENGINE ---
        function spawnFrame(url, name, color) {
            const id = 'win-' + Date.now();
            const html = `
                <div class="holoframe" id="${id}" style="border-color:${color}; top:15vh; left:10vw; width:80vw; height:50vh; z-index:1000;">
                    <div class="holo-header" style="border-bottom: 1px solid ${color}44">
                        <span style="font-size:10px; color:${color}; font-weight:bold;">${name}</span>
                        <div class="action-btns">
                            <span class="close-btn" onclick="closeThread('${id}')">âœ•</span>
                        </div>
                    </div>
                    <div class="iframe-wrapper">
                        <iframe src="${url}" loading="lazy"></iframe>
                    </div>
                </div>`;
            
            document.getElementById('desktop-manager').insertAdjacentHTML('beforeend', html);
            makeDraggable(document.getElementById(id));
            threads.push({id, name});
            logHistory(name, url, color);
        }

        function makeDraggable(el) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            const header = el.querySelector('.holo-header');
            header.onmousedown = dragStart;
            header.ontouchstart = dragStart;

            function dragStart(e) {
                e.preventDefault();
                pos3 = e.clientX || e.touches[0].clientX;
                pos4 = e.clientY || e.touches[0].clientY;
                document.onmouseup = dragEnd;
                document.onmousemove = dragMove;
                document.ontouchend = dragEnd;
                document.ontouchmove = dragMove;
            }

            function dragMove(e) {
                let cx = e.clientX || (e.touches ? e.touches[0].clientX : pos3);
                let cy = e.clientY || (e.touches ? e.touches[0].clientY : pos4);
                pos1 = pos3 - cx;
                pos2 = pos4 - cy;
                pos3 = cx;
                pos4 = cy;
                el.style.top = (el.offsetTop - pos2) + "px";
                el.style.left = (el.offsetLeft - pos1) + "px";
            }

            function dragEnd() {
                document.onmouseup = null; document.onmousemove = null;
                document.ontouchend = null; document.ontouchmove = null;
            }
        }

        function closeThread(id) { document.getElementById(id).remove(); }

        // --- UI UTILS ---
        function toggleSheet() { document.getElementById('bottom-controls-sheet').classList.toggle('expanded'); }
        function toggleHistory() { document.getElementById('history-panel').classList.toggle('open'); }

        function updateOSBackground(mode, url) {
            const v = document.getElementById('video-bg');
            v.src = url;
            v.play();
        }

        function renderApps() {
            const apps = [
                { name: "Nexus", url: "https://artemis-hub.vercel.app/", icon: "ðŸ§¬", color: "#00f2ff" },
                { name: "Starblood", url: "https://starblood.vercel.app/", icon: "ðŸ©¸", color: "#ff0000" },
                { name: "Architect", url: "https://architect-artemis.vercel.app/", icon: "ðŸ“", color: "#ff00ff" }
            ];
            const container = document.getElementById('app-wrapper');
            apps.forEach(app => {
                const div = document.createElement('div');
                div.className = 'app-icon';
                div.innerHTML = `<div class="icon-box" style="border-color:${app.color}">${app.icon}</div><span style="font-size:10px;">${app.name}</span>`;
                div.onclick = () => spawnFrame(app.url, app.name, app.color);
                container.appendChild(div);
            });
        }

        function executeNeuralSearch(e) {
            e.preventDefault();
            const q = document.getElementById('search-input').value;
            if(q) spawnFrame(`https://www.google.com/search?q=${encodeURIComponent(q)}&igu=1`, q.toUpperCase(), "#fff");
        }

        function logHistory(name, url, color) {
            historyData.unshift({name, url, color, time: new Date().toLocaleTimeString()});
            if(historyData.length > 10) historyData.pop();
            localStorage.setItem('artemis_history', JSON.stringify(historyData));
            renderHistory();
        }

        function renderHistory() {
            const list = document.getElementById('history-list');
            list.innerHTML = historyData.map(h => `<div style="padding:15px; border-bottom:1px solid rgba(0,242,255,0.1); font-size:10px; color:${h.color}">${h.name} <br> <span style="opacity:0.5">${h.time}</span></div>`).join('');
        }
    </script>
</body>
</html>
