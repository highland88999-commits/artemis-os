<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ARTEMIS â€¢ APEX OS</title>
    <style>
        :root { --cyan: #00f2ff; --green: #39ff14; --red: #ff3131; --glass: rgba(0, 10, 15, 0.9); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { margin:0; padding:0; width:100%; height:100%; overflow:hidden; background:#000; font-family: 'Courier New', monospace; }
        
        #bg-video { position: fixed; inset: 0; width: 100%; height: 100%; object-fit: cover; z-index: -1; filter: brightness(0.3); }

        /* App Grid Scaling */
        #app-grid {
            position: fixed; top: 30px; left: 5%; right: 5%; 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); 
            gap: 25px; z-index: 50; max-height: 40vh; overflow-y: auto; padding: 10px;
        }
        .app-icon { transition: 0.3s; text-align: center; cursor: pointer; }
        .app-icon:hover { transform: scale(1.1) translateY(-5px); }

        /* Holoframe Window */
        .holoframe {
            position: fixed; top: 5%; left: 5%; width: 90%; height: 82%;
            display: flex; flex-direction: column; border: 2px solid var(--cyan);
            border-radius: 12px; background: var(--glass); backdrop-filter: blur(20px);
            z-index: 1000; transition: transform 0.4s cubic-bezier(0.165, 0.84, 0.44, 1), opacity 0.3s;
        }
        .holoframe.minimized { transform: scale(0.2) translateY(1000px); opacity: 0; pointer-events: none; }

        .holo-header {
            padding: 12px 20px; border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex; justify-content: space-between; align-items: center;
        }
        .controls { display: flex; gap: 18px; align-items: center; }
        .ctrl-btn { cursor: pointer; font-weight: bold; font-size: 16px; transition: 0.2s; color: inherit; }
        .ctrl-btn:hover { text-shadow: 0 0 10px currentColor; }

        /* Window Content */
        .iframe-wrapper { position: relative; flex: 1; background: #000; overflow: hidden; border-radius: 0 0 10px 10px; }
        iframe { width: 100%; height: 100%; border: none; }

        /* Portal Transition */
        .portal-overlay {
            position: absolute; inset: 0; z-index: 2000; background: #000;
            display: flex; justify-content: center; align-items: center;
        }
        .portal-video { width: 100%; height: 100%; object-fit: cover; }

        /* Task Tray (The Horizontal Dock) */
        #task-tray-container {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 900px; z-index: 2000;
            background: rgba(0,0,0,0.7); border: 1px solid rgba(0,242,255,0.3);
            border-radius: 50px; padding: 12px 25px; backdrop-filter: blur(15px);
        }
        #task-tray {
            display: flex; gap: 15px; overflow-x: auto; padding-bottom: 8px;
            scroll-behavior: smooth;
        }

        /* Neon Scrollbar Logic */
        #task-tray::-webkit-scrollbar { height: 4px; }
        #task-tray::-webkit-scrollbar-track { background: transparent; }
        #task-tray::-webkit-scrollbar-thumb { background: var(--green); border-radius: 10px; box-shadow: 0 0 8px var(--green); }
        
        @media (max-width: 768px) {
            #task-tray::-webkit-scrollbar-thumb { background: var(--red); box-shadow: 0 0 8px var(--red); }
        }

        .task-pill {
            min-width: 130px; padding: 10px; border: 1px solid var(--cyan);
            text-align: center; color: var(--cyan); cursor: pointer;
            font-size: 11px; font-weight: bold; white-space: nowrap; transition: 0.3s;
            background: rgba(0,0,0,0.4);
        }
        .task-pill.active { background: var(--cyan); color: #000; box-shadow: 0 0 15px var(--cyan); }
    </style>
</head>
<body>

    <video id="bg-video" autoplay loop muted playsinline>
        <source src="https://raw.githubusercontent.com/highland88999-commits/artemis-hub/main/No_humans_pleas%20(1).mp4" type="video/mp4">
    </video>

    <div id="app-grid"></div>
    <div id="desktop-manager"></div>

    <div id="task-tray-container">
        <div id="task-tray">
            <div class="task-pill" onclick="spawnFrame('https://artemis-hub.onrender.com', 'NEXUS_HUB', '#00f2ff')">[ + OPEN_HUB ]</div>
        </div>
    </div>

<script>
    const nativeApps = [
        { name: "R.E.M.", url: "https://rem-psi-mauve.vercel.app/", color: "#bc13fe", icon: "ðŸ‘ï¸" },
        { name: "Aetheris", url: "https://aetheris-business-model.vercel.app/", color: "#00f2ff", icon: "ðŸ”±" },
        { name: "Tracker", url: "https://olympus-aetheris.vercel.app/", color: "#7df9ff", icon: "ðŸ›°ï¸" },
        { name: "Hoodies", url: "https://olympus-lac.vercel.app/", color: "#ffd700", icon: "ðŸ‘•" },
        { name: "Nexus", url: "https://nexus-symbiote.onrender.com/", color: "#39ff14", icon: "ðŸ§¬" },
        { name: "The Pearl", url: "https://axiom-repository.vercel.app/", color: "#f0f0f0", icon: "âšª" },
        { name: "Architect", url: "https://architect-artemis.vercel.app/", color: "#ff00ff", icon: "ðŸ“" },
        { name: "Dutchman", url: "https://the-flying-dutchman.vercel.app/", color: "#005f73", icon: "âš“" },
        { name: "Starblood", url: "https://starblood.vercel.app/", color: "#ff0000", icon: "ðŸ©¸" },
        { name: "Titan Fall", url: "https://mega-city-liard.vercel.app/", color: "#ff8c00", icon: "ðŸ¤–" },
        { name: "Finances", url: "https://olympian-finances.vercel.app/", color: "#2ecc71", icon: "âš–ï¸" },
        { name: "Gully", url: "https://grief-gully.vercel.app/", color: "#581845", icon: "ðŸ’€" },
        { name: "Contact", url: "https://georgia-aquarium.vercel.app/", color: "#3498db", icon: "ðŸ“§" }
    ];

    let threads = [];

    // Initialize Native App Grid
    const grid = document.getElementById('app-grid');
    nativeApps.forEach(app => {
        const div = document.createElement('div');
        div.className = 'app-icon';
        div.innerHTML = `
            <div style="width:70px; height:70px; margin:0 auto; border:2px solid ${app.color}; border-radius:15px; 
                 display:flex; justify-content:center; align-items:center; font-size:32px; 
                 background:rgba(0,0,0,0.6); box-shadow: 0 0 15px ${app.color}33;">
                 ${app.icon}
            </div>
            <div style="color:${app.color}; font-size:10px; margin-top:8px; font-weight:bold; letter-spacing:1px;">${app.name.toUpperCase()}</div>
        `;
        div.onclick = (e) => { e.stopPropagation(); spawnFrame(app.url, app.name, app.color); };
        grid.appendChild(div);
    });

    function spawnFrame(url, name, color) {
        // Prevent duplicates if you prefer, or allow multiple
        const id = 'thread-' + Date.now();
        const markup = `
            <div class="holoframe" id="${id}" style="border-color:${color}" onclick="event.stopPropagation()">
                <div class="holo-header" style="background:${color}11">
                    <span style="color:${color}; letter-spacing:2px; font-weight:bold;">${name.toUpperCase()}</span>
                    <div class="controls" style="color:${color}">
                        <div class="ctrl-btn" onclick="muteFrame('${id}')" title="Reset/Mute">ðŸ”‡</div>
                        <div class="ctrl-btn" onclick="minimizeFrame('${id}')" title="Minimize">_</div>
                        <div class="ctrl-btn" onclick="terminateThread('${id}')" style="color:#ff3366">X</div>
                    </div>
                </div>
                <div class="iframe-wrapper">
                    <div class="portal-overlay" id="portal-${id}">
                        <video class="portal-video" autoplay loop muted playsinline>
                            <source src="https://raw.githubusercontent.com/highland88999-commits/artemis-hub/main/VID_20260208225522.mp4" type="video/mp4">
                        </video>
                    </div>
                    <iframe id="iframe-${id}" src="${url}" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture"></iframe>
                </div>
            </div>
        `;
        document.getElementById('desktop-manager').insertAdjacentHTML('beforeend', markup);
        threads.push({ id, name, color });
        
        const iframe = document.getElementById(`iframe-${id}`);
        iframe.onload = () => {
            setTimeout(() => { 
                const portal = document.getElementById(`portal-${id}`);
                if(portal) portal.style.display = 'none'; 
            }, 1800);
        };
        updateTray();
    }

    function muteFrame(id) {
        const iframe = document.getElementById(`iframe-${id}`);
        iframe.src = iframe.src; // Resets frame state
    }

    function minimizeFrame(id) {
        document.getElementById(id).classList.add('minimized');
        updateTray();
    }

    function maximizeFrame(id) {
        const el = document.getElementById(id);
        el.classList.remove('minimized');
        el.style.zIndex = Date.now(); // Bring to front
        updateTray();
    }

    function terminateThread(id) {
        const el = document.getElementById(id);
        if(el) el.remove();
        threads = threads.filter(t => t.id !== id);
        updateTray();
    }

    function updateTray() {
        const tray = document.getElementById('task-tray');
        // Keep the "Open Hub" button + active threads
        let html = `<div class="task-pill" onclick="spawnFrame('https://artemis-hub.onrender.com', 'NEXUS_HUB', '#00f2ff')">[ + HUB ]</div>`;
        threads.forEach(t => {
            const isMin = document.getElementById(t.id).classList.contains('minimized');
            html += `
                <div class="task-pill ${!isMin ? 'active' : ''}" style="border-color:${t.color}; color:${t.color}" onclick="maximizeFrame('${t.id}')">
                    ${t.name.toUpperCase()}
                </div>
            `;
        });
        tray.innerHTML = html;
    }

    // Click Outside to Minimize
    window.onclick = () => {
        threads.forEach(t => {
            const el = document.getElementById(t.id);
            if(el) el.classList.add('minimized');
        });
        updateTray();
    };

    // Global listener for the Hub
    window.addEventListener('message', (e) => {
        if (e.data.type === 'load_site') {
            spawnFrame(e.data.url, e.data.name, '#00f2ff');
        }
    });

</script>
</body>
</html>
